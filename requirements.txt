# ============================================================================
# BINDRAE - Stage-1 & Stage-2 Requirements
# ============================================================================
# 
# 项目: 基于 FlashIPA 的蛋白质构象生成模型
# 环境: Linux + CUDA 11.8+ (训练), Mac (开发)
# Python: >=3.10 (推荐 3.11)
# 
# 快速安装:
# ============================================================================
#   conda create -n bindrae python=3.11
#   conda activate bindrae
#   conda install pytorch pytorch-cuda=11.8 -c pytorch -c nvidia
#   conda install -c conda-forge rdkit
#   pip install -r requirements.txt
#   pip install flash-attn --no-build-isolation  # 需要 5-15 分钟编译
#   
#   # 安装 flash_ipa 到 vendor 目录
#   mkdir -p vendor && cd vendor
#   git clone https://github.com/flagshippioneering/flash_ipa.git
# ============================================================================

# ----------------------------------------------------------------------------
# 核心深度学习框架
# ----------------------------------------------------------------------------
torch>=2.0.0

# ----------------------------------------------------------------------------
# FlashAttention 编译依赖 (必须在 flash-attn 之前安装)
# ----------------------------------------------------------------------------
psutil>=5.9.0
ninja>=1.11.0
packaging>=23.0

# ----------------------------------------------------------------------------
# FlashIPA 运行依赖
# ----------------------------------------------------------------------------
einops>=0.7.0
beartype>=0.15.0
jaxtyping>=0.2.20

# ----------------------------------------------------------------------------
# 生物信息学工具
# ----------------------------------------------------------------------------
biopython>=1.80
# rdkit - 建议用 conda 安装: conda install -c conda-forge rdkit

# ----------------------------------------------------------------------------
# 科学计算
# ----------------------------------------------------------------------------
numpy>=1.24.0,<2.0.0
scipy>=1.10.0

# ----------------------------------------------------------------------------
# 数据处理与进度显示
# ----------------------------------------------------------------------------
tqdm>=4.65.0
requests>=2.31.0

# ----------------------------------------------------------------------------
# 可选：ESM 预处理 (如需重新生成 ESM 特征)
# ----------------------------------------------------------------------------
# fair-esm>=2.0.0
# transformers>=4.30.0

# ----------------------------------------------------------------------------
# 可选：实验管理与可视化
# ----------------------------------------------------------------------------
# wandb>=0.15.0
# tensorboard>=2.13.0
# matplotlib>=3.7.0
# pandas>=2.0.0

# ============================================================================
# 安装后验证
# ============================================================================
# 
# python -c "import torch; print(f'PyTorch: {torch.__version__}, CUDA: {torch.cuda.is_available()}')"
# python -c "from rdkit import Chem; print('RDKit: OK')"
# python -c "from Bio import PDB; print('BioPython: OK')"
# python -c "import einops, beartype, jaxtyping; print('einops/beartype/jaxtyping: OK')"
# python -c "from flash_attn import flash_attn_varlen_func; print('FlashAttention: OK')"
# 
# ============================================================================
# FlashIPA 验证 (安装到 vendor 后)
# ============================================================================
# 
# cd /path/to/BINDRAE
# python -c "
# import sys
# sys.path.insert(0, 'vendor/flash_ipa/src')
# from flash_ipa.ipa import InvariantPointAttention
# print('FlashIPA: OK')
# "
# 
# ============================================================================
